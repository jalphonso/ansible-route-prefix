---
  - name: Deploy Route Prefix List changes to nodes
    hosts: router
    roles: 
      - Juniper.junos
    connection: local
    gather_facts: no
    vars:
      - junos_jinja_template: ./route_prefix_snipp.j2
      - junos_config: ./route_prefix_snipp.conf
    vars_files:
      - vars.yml

    tasks:

    - template:
        src: "{{ junos_jinja_template }}"
        dest: "{{ junos_config }}"

    - name: Deploy Junos config to device
      junos_install_config:
        file: "{{ junos_config }}"
        diffs_file: diff
        host: "{{ inventory_hostname }}"
        replace: yes
        user: jalphons
        timeout: 60
    #    confirm: 1
